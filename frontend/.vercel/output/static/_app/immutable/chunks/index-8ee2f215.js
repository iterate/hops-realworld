import{S as ge,i as be,s as ke,k as m,a as P,q as V,l as p,m as k,h as _,c as y,r as q,K as he,n as h,b as O,D as u,u as R,B as j,N as Ae,L as De,M as Ie,e as Y,g as Ee,t as Z,d as we,f as $,E as Ne,O as Se,P as Pe,w as ye,x as Le,y as Ce,z as Ve}from"./index-8e1f88f9.js";import{p as qe}from"./stores-5e05607c.js";import{e as Me}from"./forms-03f36850.js";function _e(n,t,e){const l=n.slice();return l[3]=t[e],l}function de(n){let t,e,l,i,r,o,s,a=n[0].favoritesCount+"",c,E,I,N,L,T;return{c(){t=m("form"),e=m("input"),i=P(),r=m("button"),o=m("i"),s=P(),c=V(a),this.h()},l(g){t=p(g,"FORM",{method:!0,action:!0,class:!0});var b=k(t);e=p(b,"INPUT",{type:!0,name:!0}),i=y(b),r=p(b,"BUTTON",{class:!0});var S=k(r);o=p(S,"I",{class:!0}),k(o).forEach(_),s=y(S),c=q(S,a),S.forEach(_),b.forEach(_),this.h()},h(){e.hidden=!0,h(e,"type","checkbox"),h(e,"name","favorited"),e.checked=l=n[0].favorited,h(o,"class","ion-heart"),h(r,"class",E="btn btn-sm "+(n[0].favorited?"btn-primary":"btn-outline-primary")),h(t,"method","POST"),h(t,"action",I="/article/"+n[0].slug+"?/toggleFavorite"),h(t,"class","pull-xs-right")},m(g,b){O(g,t,b),u(t,e),u(t,i),u(t,r),u(r,o),u(r,s),u(r,c),L||(T=De(N=Me.call(null,t,n[2])),L=!0)},p(g,b){b&1&&l!==(l=g[0].favorited)&&(e.checked=l),b&1&&a!==(a=g[0].favoritesCount+"")&&R(c,a),b&1&&E!==(E="btn btn-sm "+(g[0].favorited?"btn-primary":"btn-outline-primary"))&&h(r,"class",E),b&1&&I!==(I="/article/"+g[0].slug+"?/toggleFavorite")&&h(t,"action",I),N&&Ie(N.update)&&b&1&&N.update.call(null,g[2])},d(g){g&&_(t),L=!1,T()}}}function me(n){let t,e,l=n[3]+"",i,r;return{c(){t=m("li"),e=m("a"),i=V(l),this.h()},l(o){t=p(o,"LI",{class:!0});var s=k(t);e=p(s,"A",{href:!0});var a=k(e);i=q(a,l),a.forEach(_),s.forEach(_),this.h()},h(){h(e,"href",r="/?tag="+n[3]),h(t,"class","tag-default tag-pill tag-outline")},m(o,s){O(o,t,s),u(t,e),u(e,i)},p(o,s){s&1&&l!==(l=o[3]+"")&&R(i,l),s&1&&r!==(r="/?tag="+o[3])&&h(e,"href",r)},d(o){o&&_(t)}}}function Oe(n){let t,e,l,i,r,o,s,a,c,E,I=n[0].author.username+"",N,L,T,g,b=new Date(n[0].createdAt).toDateString()+"",S,x,ee,D,U,B=n[0].title+"",J,te,z,G=n[0].description+"",Q,le,H,ae,re,M,W,w=n[1]&&de(n),F=n[0].tagList,A=[];for(let f=0;f<F.length;f+=1)A[f]=me(_e(n,F,f));return{c(){t=m("div"),e=m("div"),l=m("a"),i=m("img"),a=P(),c=m("div"),E=m("a"),N=V(I),T=P(),g=m("span"),S=V(b),x=P(),w&&w.c(),ee=P(),D=m("a"),U=m("h1"),J=V(B),te=P(),z=m("p"),Q=V(G),le=P(),H=m("span"),ae=V("Read more..."),re=P(),M=m("ul");for(let f=0;f<A.length;f+=1)A[f].c();this.h()},l(f){t=p(f,"DIV",{class:!0});var v=k(t);e=p(v,"DIV",{class:!0});var d=k(e);l=p(d,"A",{href:!0});var K=k(l);i=p(K,"IMG",{src:!0,alt:!0}),K.forEach(_),a=y(d),c=p(d,"DIV",{class:!0});var X=k(c);E=p(X,"A",{class:!0,href:!0});var ie=k(E);N=q(ie,I),ie.forEach(_),T=y(X),g=p(X,"SPAN",{class:!0});var oe=k(g);S=q(oe,b),oe.forEach(_),X.forEach(_),x=y(d),w&&w.l(d),d.forEach(_),ee=y(v),D=p(v,"A",{href:!0,class:!0});var C=k(D);U=p(C,"H1",{});var ne=k(U);J=q(ne,B),ne.forEach(_),te=y(C),z=p(C,"P",{});var ce=k(z);Q=q(ce,G),ce.forEach(_),le=y(C),H=p(C,"SPAN",{});var ue=k(H);ae=q(ue,"Read more..."),ue.forEach(_),re=y(C),M=p(C,"UL",{class:!0});var fe=k(M);for(let se=0;se<A.length;se+=1)A[se].l(fe);fe.forEach(_),C.forEach(_),v.forEach(_),this.h()},h(){he(i.src,r=n[0].author.image)||h(i,"src",r),h(i,"alt",o=n[0].author.username),h(l,"href",s="/profile/@"+n[0].author.username),h(E,"class","author"),h(E,"href",L="/profile/@"+n[0].author.username),h(g,"class","date"),h(c,"class","info"),h(e,"class","article-meta"),h(M,"class","tag-list"),h(D,"href",W="/article/"+n[0].slug),h(D,"class","preview-link"),h(t,"class","article-preview")},m(f,v){O(f,t,v),u(t,e),u(e,l),u(l,i),u(e,a),u(e,c),u(c,E),u(E,N),u(c,T),u(c,g),u(g,S),u(e,x),w&&w.m(e,null),u(t,ee),u(t,D),u(D,U),u(U,J),u(D,te),u(D,z),u(z,Q),u(D,le),u(D,H),u(H,ae),u(D,re),u(D,M);for(let d=0;d<A.length;d+=1)A[d].m(M,null)},p(f,[v]){if(v&1&&!he(i.src,r=f[0].author.image)&&h(i,"src",r),v&1&&o!==(o=f[0].author.username)&&h(i,"alt",o),v&1&&s!==(s="/profile/@"+f[0].author.username)&&h(l,"href",s),v&1&&I!==(I=f[0].author.username+"")&&R(N,I),v&1&&L!==(L="/profile/@"+f[0].author.username)&&h(E,"href",L),v&1&&b!==(b=new Date(f[0].createdAt).toDateString()+"")&&R(S,b),f[1]?w?w.p(f,v):(w=de(f),w.c(),w.m(e,null)):w&&(w.d(1),w=null),v&1&&B!==(B=f[0].title+"")&&R(J,B),v&1&&G!==(G=f[0].description+"")&&R(Q,G),v&1){F=f[0].tagList;let d;for(d=0;d<F.length;d+=1){const K=_e(f,F,d);A[d]?A[d].p(K,v):(A[d]=me(K),A[d].c(),A[d].m(M,null))}for(;d<A.length;d+=1)A[d].d(1);A.length=F.length}v&1&&W!==(W="/article/"+f[0].slug)&&h(D,"href",W)},i:j,o:j,d(f){f&&_(t),w&&w.d(),Ae(A,f)}}}function Te(n,t,e){let{article:l}=t,{user:i}=t;const r=({form:o})=>{l.favorited?(e(0,l.favorited=!1,l),e(0,l.favoritesCount-=1,l)):(e(0,l.favorited=!0,l),e(0,l.favoritesCount+=1,l));const s=o.querySelector("button");return s.disabled=!0,({result:a,update:c})=>{s.disabled=!1,a.type==="error"&&c()}};return n.$$set=o=>{"article"in o&&e(0,l=o.article),"user"in o&&e(1,i=o.user)},[l,i,r]}class Fe extends ge{constructor(t){super(),be(this,t,Te,Oe,ke,{article:0,user:1})}}function pe(n,t,e){const l=n.slice();return l[2]=t[e],l}function Re(n){let t,e=[],l=new Map,i,r=n[0];const o=s=>s[2].slug;for(let s=0;s<r.length;s+=1){let a=pe(n,r,s),c=o(a);l.set(c,e[s]=ve(c,a))}return{c(){t=m("div");for(let s=0;s<e.length;s+=1)e[s].c()},l(s){t=p(s,"DIV",{});var a=k(t);for(let c=0;c<e.length;c+=1)e[c].l(a);a.forEach(_)},m(s,a){O(s,t,a);for(let c=0;c<e.length;c+=1)e[c].m(t,null);i=!0},p(s,a){a&3&&(r=s[0],Ee(),e=Se(e,a,o,1,s,r,l,t,Pe,ve,null,pe),we())},i(s){if(!i){for(let a=0;a<r.length;a+=1)$(e[a]);i=!0}},o(s){for(let a=0;a<e.length;a+=1)Z(e[a]);i=!1},d(s){s&&_(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function Ue(n){let t,e;return{c(){t=m("div"),e=V("No articles are here... yet."),this.h()},l(l){t=p(l,"DIV",{class:!0});var i=k(t);e=q(i,"No articles are here... yet."),i.forEach(_),this.h()},h(){h(t,"class","article-preview")},m(l,i){O(l,t,i),u(t,e)},p:j,i:j,o:j,d(l){l&&_(t)}}}function ve(n,t){let e,l,i;return l=new Fe({props:{article:t[2],user:t[1].data.user}}),{key:n,first:null,c(){e=Y(),ye(l.$$.fragment),this.h()},l(r){e=Y(),Le(l.$$.fragment,r),this.h()},h(){this.first=e},m(r,o){O(r,e,o),Ce(l,r,o),i=!0},p(r,o){t=r;const s={};o&1&&(s.article=t[2]),o&2&&(s.user=t[1].data.user),l.$set(s)},i(r){i||($(l.$$.fragment,r),i=!0)},o(r){Z(l.$$.fragment,r),i=!1},d(r){r&&_(e),Ve(l,r)}}}function Be(n){let t,e,l,i;const r=[Ue,Re],o=[];function s(a,c){return a[0].length===0?0:1}return t=s(n),e=o[t]=r[t](n),{c(){e.c(),l=Y()},l(a){e.l(a),l=Y()},m(a,c){o[t].m(a,c),O(a,l,c),i=!0},p(a,[c]){let E=t;t=s(a),t===E?o[t].p(a,c):(Ee(),Z(o[E],1,1,()=>{o[E]=null}),we(),e=o[t],e?e.p(a,c):(e=o[t]=r[t](a),e.c()),$(e,1),e.m(l.parentNode,l))},i(a){i||($(e),i=!0)},o(a){Z(e),i=!1},d(a){o[t].d(a),a&&_(l)}}}function ze(n,t,e){let l;Ne(n,qe,r=>e(1,l=r));let{articles:i}=t;return n.$$set=r=>{"articles"in r&&e(0,i=r.articles)},[i,l]}class je extends ge{constructor(t){super(),be(this,t,ze,Be,ke,{articles:0})}}export{je as A};
